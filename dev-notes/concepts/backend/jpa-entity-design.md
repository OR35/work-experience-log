# JPA Entity Design Notes

## 기본 원칙

- 연관관계 최소화
- 양방향 관계 지양
- 도메인 중심 설계
- 비즈니스 로직은 서비스 계층에서 처리
- 조회 목적 DTO와 엔티티 분리

---

## 연관관계 설계 기준

- 가능한 단방향 관계 우선
- 필요할 때만 양방향 관계 사용
- 다대다(ManyToMany)는 지양

---

## 자주 겪은 문제

### N+1 문제
- 원인: Lazy Loading + 반복 접근
- 해결:
  - fetch join
  - 조회 전용 쿼리 분리

### Cascade 설정 실수
- 의도치 않은 삭제/저장 발생
- Cascade는 정말 필요한 경우에만 사용

---

## ID 참조 전략

- 연관 엔티티 전체 참조 대신 ID 값만 보유
- 조회 시 필요한 데이터만 조합

---

## 실무 팁

- 엔티티 = 저장 구조
- DTO = 화면 구조
- 엔티티를 그대로 반환하지 않는다