# [Concept] Composable을 활용한 검색 상태 복구 로직의 추상화 전략

목록-상세 이동 시 발생하는 검색 조건 유지 로직의 중복을 제거하고, 자식 컴포넌트의 마운트 시점을 고려한 안정적인 데이터 복원 전략입니다.

---

## 1. 배경 (Context)
- **코드 비대화:** 여러 목록 페이지에서 `onMounted` 시점에 검색 조건을 수동으로 할당하는 `if`문 블록이 반복되어 유지보수성이 저하됨.
- **렌더링 타이밍 이슈:** 자식 컴포넌트(검색 폼)가 완전히 마운트되기 전에 데이터를 주입하려다 발생하는 `null` 참조 에러 및 데이터 유실 문제.

---

## 2. 해결 전략
- **로직의 캡슐화 (Composable):** 복잡한 복구 프로세스를 `useSearchRestore`라는 전용 Composable로 분리하여 페이지 컴포넌트의 가독성 향상.
- **비동기 렌더링 제어:** `nextTick`을 활용하여 자식 컴포넌트의 DOM/Ref가 준비된 시점을 보장한 뒤 데이터를 주입하는 안정적인 시퀀스 구축.
- **유연한 데이터 매핑:** 하드코딩된 필드 대신 `extraFields` 배열을 통해 메뉴별로 상이한 검색 필드를 처리할 수 있는 추상화 레이어 설계.

---
## 3. 기대 효과
- **DX(개발자 경험) 개선:** 수십 줄의 복구 로직을 단 한 줄의 `await restore()` 호출로 단순화.
- **안정성:** 반응성(`Reactivity`)을 깨뜨리지 않는 `Object.assign` 방식 채택으로 사이드 이펙트 방지.

---

> **관련 코드:** [Composable 기반 검색 조건 복구 구현](../../dev-notes/code-notes/state/composable-search-restore.md)
